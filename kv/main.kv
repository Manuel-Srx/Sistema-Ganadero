#:kivy 2.3.0

<WindowManager>:
    MenuScreen:
    InventarioScreen:
    VeterinariaScreen:

# ===========================
#        MEN√ö PRINCIPAL
# ===========================
<MenuScreen@Screen>:
    name: "menu"

    BoxLayout:
        orientation: "vertical"
        padding: 40
        spacing: 20
        canvas.before:
            Color:
                rgba: 0.05, 0.05, 0.05, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "üêÑ SISTEMA GANADERO"
            font_size: "28sp"
            bold: True
            color: 1, 1, 1, 1

        Button:
            text: "üìã Inventario de Animales"
            font_size: "18sp"
            size_hint_y: None
            height: 50
            background_color: 0.2, 0.6, 0.2, 1
            on_release: app.root.current = "inventario"

        Button:
            text: "üíä M√≥dulo Veterinario"
            font_size: "18sp"
            size_hint_y: None
            height: 50
            background_color: 0.4, 0.5, 0.8, 1
            on_release: app.root.current = "veterinaria"

        Button:
            text: "‚öôÔ∏è Configuraci√≥n"
            font_size: "18sp"
            size_hint_y: None
            height: 50
            background_color: 0.2, 0.4, 0.6, 1

        Button:
            text: "üö™ Salir"
            font_size: "18sp"
            size_hint_y: None
            height: 50
            background_color: 0.6, 0.2, 0.2, 1
            on_release: app.stop()

# ===========================
#   PANTALLA INVENTARIO
# ===========================
<InventarioScreen>:
    name: "inventario"

    BoxLayout:
        orientation: "vertical"
        padding: 30
        spacing: 15
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "üìã Inventario de Ganado"
            font_size: "26sp"
            bold: True
            color: 0, 0.2, 0.5, 1
            size_hint_y: None
            height: 50

        GridLayout:
            cols: 2
            row_default_height: 50
            spacing: 10
            size_hint_y: None
            height: self.minimum_height

            TextInput:
                id: nombre_input
                hint_text: "Nombre del animal"
                multiline: False

            BoxLayout:
                orientation: "horizontal"
                spacing: 5
                TextInput:
                    id: raza_input
                    hint_text: "Escriba nueva raza o seleccione"
                    multiline: False
                Spinner:
                    id: raza_spinner
                    text: "Seleccionar raza"
                    values: root.razas
                    size_hint_x: 0.6

            TextInput:
                id: edad_input
                hint_text: "Edad"
                input_filter: "int"
                multiline: False

            TextInput:
                id: peso_input
                hint_text: "Peso (kg)"
                input_filter: "float"
                multiline: False

            Spinner:
                id: sexo_spinner
                text: "Seleccione sexo"
                values: ["Macho", "Hembra"]

            TextInput:
                id: fecha_input
                hint_text: "Fecha nacimiento (YYYY-MM-DD)"
                multiline: False

            Spinner:
                id: salud_spinner
                text: "Seleccione estado"
                values: ["Sana", "Enferma"]
                on_text: root.cambiar_salud(self.text)

            TextInput:
                id: obs_input
                hint_text: "Observaciones"
                disabled: True
                multiline: True

        Button:
            text: "Agregar animal"
            size_hint_y: None
            height: 50
            background_color: 0, 0.5, 0, 1
            color: 1, 1, 1, 1
            bold: True
            on_release: root.agregar_animal()

        RecycleView:
            id: rv_animales
            viewclass: "Label"
            size_hint_y: 0.5
            RecycleBoxLayout:
                orientation: "vertical"
                default_size: None, dp(40)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height

        Button:
            text: "‚¨ÖÔ∏è Volver al men√∫"
            size_hint_y: None
            height: 50
            background_color: 0.3, 0.3, 0.3, 1
            color: 1, 1, 1, 1
            on_release: app.root.current = "menu"


# ===========================
#     M√ìDULO VETERINARIO
# ===========================
<VeterinariaScreen>:
    name: "veterinaria"

    ScrollView:
        do_scroll_x: False

        BoxLayout:
            orientation: "vertical"
            padding: 20
            spacing: 20
            size_hint_y: None
            height: self.minimum_height

            Label:
                text: "üêÑ M√≥dulo Veterinario"
                font_size: "26sp"
                bold: True
                size_hint_y: None
                height: 50

            # --------------------------
            #   SECCI√ìN 1: Datos Animal
            # --------------------------
            BoxLayout:
                orientation: "vertical"
                padding: 15
                spacing: 10
                canvas.before:
                    Color:
                        rgba: 0.95, 0.95, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: "Datos del Animal"
                    bold: True
                    size_hint_y: None
                    height: 30

                GridLayout:
                    cols: 2
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

                    Label:
                        text: "ID:"
                    TextInput:
                        id: animal_id
                        readonly: True

                    Label:
                        text: "Nombre:"
                    TextInput:
                        id: nombre_input
                        readonly: True

                    Label:
                        text: "Raza:"
                    TextInput:
                        id: raza_input
                        readonly: True

            # --------------------------
            #   SECCI√ìN 2: S√≠ntomas
            # --------------------------
            BoxLayout:
                orientation: "vertical"
                padding: 15
                spacing: 10
                canvas.before:
                    Color:
                        rgba: 0.95, 1, 0.95, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    text: "Registro de S√≠ntomas"
                    bold: True
                    size_hint_y: None
                    height: 30

                Spinner:
                    id: sintomas_spinner
                    text: "Seleccionar s√≠ntoma"
                    values: root.lista_sintomas
                    size_hint_y: None
                    height: 45
                    on_text: root.agregar_sintoma(self.text)

                TextInput:
                    id: sintomas_desc
                    hint_text: "Descripci√≥n detallada"
                    multiline: True
                    size_hint_y: None
                    height: 130

                Button:
                    text: "üîç Generar Diagn√≥stico"
                    size_hint_y: None
                    height: 50
                    background_color: 0.2, 0.6, 0.2, 1
                    on_release: root.generar_diagnostico()

            # --------------------------
            #   SECCI√ìN 3: Diagn√≥stico
            # --------------------------
            BoxLayout:
                orientation: "vertical"
                padding: 15
                spacing: 10
                canvas.before:
                    Color:
                        rgba: 1, 0.95, 0.95, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    text: "Resultado del Diagn√≥stico"
                    bold: True
                    size_hint_y: None
                    height: 30

                GridLayout:
                    cols: 2
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

                    Label:
                        text: "Enfermedad:"
                    TextInput:
                        id: diagnostico_input
                        readonly: True

                    Label:
                        text: "Medicamento:"
                    TextInput:
                        id: medicamento_input
                        readonly: True

                    Label:
                        text: "Dosis:"
                    TextInput:
                        id: dosis_input
                        readonly: True

                    Label:
                        text: "D√≠as:"
                    TextInput:
                        id: dias_input
                        readonly: True

            Button:
                text: "üíæ Guardar Tratamiento"
                size_hint_y: None
                height: 50
                background_color: 0.4, 0.4, 0.8, 1
                on_release: root.guardar_tratamiento()

            Button:
                text: "‚¨Ö Volver"
                size_hint_y: None
                height: 50
                background_color: 0.6, 0.2, 0.2, 1
                on_release: app.root.current = "menu"
